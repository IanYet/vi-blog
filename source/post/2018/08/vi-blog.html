<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" href="../../../theme/vibo-blog/blog.css" />
    <link rel="stylesheet" type="text/css" href="../../../theme/vibo-blog/code.css" />
    <script src=""></script>
</head>
<body>
    <header></header>
    <article>
        <nav></nav>
        <h1 id="vibo">vibo</h1>
<hr>
<blockquote>
<p>这里准备记录vibo的想法，开发，优化与发布的全过程</p>
</blockquote>
<h3 id="-">我需要什么</h3>
<p>我要一个博客。</p>
<p>本地用typora编辑markdown，由工具生成静态html，发布到github上，通过github.io/blog访问。</p>
<h3 id="-">初步想法</h3>
<p>hexo是一个不错的解决方案。但是为什么不用hexo？理由如下</p>
<ul>
<li>hexo是一个相当复杂的工具，有很多的配置项。但其本身，只是一个工具。我花时间去搞清楚hexo到底是怎么回事，不会带给我任何成长。</li>
<li>hexo的功能太多，我只想写一个博客</li>
<li>hexo的主题大多数不符合我的审美，NexT看着还ok，但是太多人用了。而且NexT就一个主题而已，搞得那么复杂？</li>
<li>自己开发一个主题？那我为什么不写一个轻量版的hexo呢</li>
</ul>
<p>其他博客源：</p>
<ul>
<li>主题不可定制，丑且千篇一律</li>
</ul>
<h3 id="-">我在做什么</h3>
<p>一个轻量版的hexo，其功能包括：</p>
<ul>
<li>输入markdown字符串</li>
<li>通过中间件对字符串进行流式处理</li>
<li>第一个中间件是markdown -&gt; html</li>
<li>通过命令行编译，本地预览，部署到github相应仓库的相应分支</li>
<li>PWA支持</li>
</ul>
<h3 id="-">技术想法</h3>
<ul>
<li>markdwon编译成html：<a href="https://marked.js.org/#/README.md">marked</a>。</li>
<li>中间件的处理方式：</li>
<li><pre><code><span class="hljs-keyword">const</span> app = {
    <span class="hljs-attr">middleware</span>: [],
    <span class="hljs-attr">init</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ctx</span>)</span>{
        <span class="hljs-comment">//...</span>
    },
    <span class="hljs-attr">use</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>)</span>{
        <span class="hljs-keyword">this</span>.middleware.push(fn)
    },
    <span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ctx</span>)</span>{
        <span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">next, fn</span>) =&gt;</span> () =&gt; fn(ctx, next)
        <span class="hljs-keyword">this</span>.middleware.reduceRight(reducer, <span class="hljs-keyword">this</span>.init(ctx))
    }
}</code></pre></li>
<li><p>child_process API执行shell脚本</p>
</li>
<li>暂时不用模版引擎，没有想到痛点</li>
<li>主题应该是重新定义模版html与css</li>
<li>渲染函数应该作为init函数</li>
<li>主题开发方式：id固定的html+css，以及json配置文件（负责管理预设模块是否显示的）</li>
<li>api</li>
<li>pwa</li>
</ul>
<h3 id="-">开发</h3>
<ul>
<li><a href="https://developer.github.com/v3/">github api</a></li>
<li>用promise代替中间件</li>
</ul>
<h3 id="todo">todo</h3>
<ol>
<li>记录md源文件的md5值，来确定每次编译的文件</li>
<li>GitHub api</li>
<li>init.js</li>
<li>写第一个主题</li>
<li>完善配置文件</li>
</ol>
<h3 id="test">test</h3>
<ul>
<li>nihao<ul>
<li>nihao</li>
<li>nihao</li>
</ul>
</li>
<li>nihao </li>
<li><blockquote>
<p>ddddd
ddddddd
dddddd
dddddd</p>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">title</th>
<th align="center">title</th>
<th align="right">title</th>
</tr>
</thead>
<tbody><tr>
<td align="left">c</td>
<td align="center">c</td>
<td align="right">c</td>
</tr>
<tr>
<td align="left">c</td>
<td align="center">c</td>
<td align="right">c</td>
</tr>
</tbody></table>
<p>---more---
this is single <code><span class="hljs-attribute">hello</span></code></p>
<pre><code><span class="hljs-attribute">hello world</span></code></pre>
    </article>
    <footer></footer>
</body>
</html>